<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Corona Virus!!</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <script src="index.js" charset="utf-8"></script>
  </head>
  <body>
    <div class="nav">
      <h1 id="logo">Corona Update Bangladesh</h1>
    </div>
    <div class="body">
        <div class="tab-container">
          <div id="table">

          </div>
          <div id="title">

          </div>
        </div>
        <div class="other-container">
              <div class="stats">
                <h1>Play your part in the fight against <br>Covid-19!</h1>
                <span>image + donate button here</span>
              </div>
              <div class="desc">
                <h1>Total Cases in Dhaka:</h1>
                <h2 id="tcasesDhk">0.6</h2>
              </div>
              <div class="graph" id="ch">
                <canvas class="stats" id="a" height="1000">

                </canvas>
              </div>
              <div class="desc">

              </div>

              <div class="stats">

              </div>
              <div class="desc">

              </div>

              <div class="stats">

              </div>
              <div class="desc">

              </div>
              <div class="stats">

              </div>
        </div>
    </div>


  </body>

</html>

<script type="text/javascript">

d3.csv('covid26042020.csv').then(function(cases) { // Cases is the whole dataset
  //console.log(cases[0]);
  var locations = cases.map(pair => pair.Location); // Maps each location in pair variable and adds to array
  var total = cases.map(pair => pair.Total);
  var ctx = document.getElementById('a').getContext('2d');
  var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'horizontalBar',

    // The data for our dataset
    data: {
        labels: locations,
        datasets: [{
            label: 'Number of Cases',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: total,
        }], 
        
    },
   
    
    // Configuration options go here
    options: {
      
      hover: {
        animationDuration: 0
      },
      animation: {
                duration : 1,
                onComplete : function() {
                    var chartInstance = this.chart,
                    ctx = chartInstance.ctx;

                    ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'bottom';

                    this.data.datasets.forEach(function(dataset, i) {
                        var meta = chartInstance.controller.getDatasetMeta(i);
                        meta.data.forEach(function(bar, index) {
                            if (dataset.data[index] > 0) {
                                var data = dataset.data[index];
                                ctx.fillText(data, bar._model.x + 10, bar._model.y + 8);
                            }
                        });
                        
                    });
                }
            },
      
      scales: {
        xAxes: [{
            gridLines: {
                color: "rgba(0, 0, 0, 0)",
                
            }
        }],
        yAxes: [{
            gridLines: {
                color: "rgba(0, 0, 0, 0)",
            }   
        }]
        
      }
    }
});

});





</script>
